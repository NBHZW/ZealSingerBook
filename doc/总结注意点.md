# 各接口中数据的缓存数据类型形式

## 笔记点赞缓存

```
zset结构
key结构  user:note:likes:用户ID
value  集合形式 对应笔记id（noteId）
score   权重为点赞时间戳

需要注意的是 
点赞接口设计到两个缓存 
第一个即上面说到的zset结构  保存的是userId->noteId:关注时间
第二个是bloom过滤器 保存的是其实也是userId所点赞过的noteId的集合 只不过是以布隆的形式保存的
所以在这个接口逻辑中 需要先检测布隆 然后再reids的ZSET 最后数据库 三层检测
对应的 添加新数据的时候 也需要添加布隆 添加redis的ZSET 最后添加到数据库中
```

## 用户关注关系缓存

```
zset结构
key结构  following:用户ID
value  集合形式 关注用户的userID的集合 
score   权重为关注时间的时间戳
```

## 计数模块

```
计数模块统一采用的Hash数据结构
笔记维度的key为count:note:noteID
其子维度key就是数据库中的字段

同理
用户维度的key就是count:user:userID
```

# 各接口流程总结

